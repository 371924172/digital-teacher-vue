{"remainingRequest":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\list.vue","mtime":1623917904000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRlbGV0ZVVzZXIsIGdldFVzZXJMaXN0LCBhZGRVc2VyIH0gZnJvbSAiQC9hcGkvdXNlck1hbmFnZSI7CmltcG9ydCB7IGdldEluZm8sIHVwZGF0ZUluZm8gfSBmcm9tICJAL2FwaS91c2VyIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJwcm9ibGVtTGlzdCIsCiAgaW5qZWN0OiBbInJlbG9hZCJdLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyTGlzdDogW10sCiAgICAgIHBhZ2VTaXplOiA1LAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHVzZXJJbmZvOiB7fSwKICAgICAgaWQ6IE51bWJlciwKICAgICAgcmVnaXN0ZXJSdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl55So5oi35ZCNIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7IG1lc3NhZ2U6ICIiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgICB7IG1lc3NhZ2U6ICIiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICBdLAogICAgICAgIHJlcGFzc3dvcmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fnoa7orqTlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICAgIHsgbWVzc2FnZTogIiIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGF0YSgpIHsKICAgICAgZ2V0VXNlckxpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudXNlckxpc3QgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBvblN1Ym1pdCgpIHt9LAoKICAgIG9wZW5VcGRhdGUoaWQpIHsKICAgICAgZ2V0SW5mbyhpZCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLnVzZXJJbmZvID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAvLyBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyaWQiLCB0aGlzLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgb3BlbkNyZWF0ZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZSgpIHsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMudXNlckluZm8gPSB7fTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgdGhpcy5wYWdlU2l6ZSA9IHZhbDsKICAgIH0sCiAgICAvL+W9k+WJjemhteaUueWPmOaXtuinpuWPkSDot7Povazlhbbku5bpobUKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB2YWw7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGVkKSB7fSwKCiAgICBhZGRVcGRhdGVJbmZvKCkgewogICAgICBpZiAodGhpcy51c2VySW5mby5zdGF0dXMpIHsKICAgICAgICB1cGRhdGVJbmZvKHRoaXMudXNlckluZm8pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51c2VySW5mby5zdGF0dXMgPSAiVHJ1ZSI7CiAgICAgICAgYWRkVXNlcih0aGlzLnVzZXJJbmZvKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgY29uc3QgeyBzdGF0dXMgfSA9IHJlc3BvbnNlOwogICAgICAgICAgaWYgKHN0YXR1cyA9PSAyMDApCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iLAogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICB0aGlzLnJlbG9hZCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuaGFuZGxlQ2xvc2UoKTsKICAgICAgdGhpcy51c2VySW5mbyA9IHt9OwogICAgfSwKICAgIGRlbGV0ZVVzZXIoaWQpIHsKICAgICAgY29uc29sZS5sb2coaWQpOwogICAgICBkZWxldGVVc2VyKGlkKTsKICAgICAgdGhpcy5yZWxvYWQoKTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXREYXRhKCk7CiAgfSwKfTsK"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div>\n    <el-dialog\n      title=\"用户信息\"\n      :visible.sync=\"dialogVisible\"\n      :before-close=\"handleClose\"\n      width=\"60%\"\n    >\n      <el-form\n        ref=\"userForm\"\n        :model=\"userInfo\"\n        label-width=\"80px\"\n        :rules=\"registerRules\"\n      >\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"userInfo.username\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"userInfo.mobile_phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"电子邮件\">\n          <el-input v-model=\"userInfo.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"姓名\">\n          <el-input v-model=\"userInfo.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"userInfo.nickname\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"身份证号\">\n          <el-input v-model=\"userInfo.id_card_no\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio-group v-model=\"userInfo.gender\" label=\"性别\">\n            <el-radio label=\"男\" value=\"1\"></el-radio>\n            <el-radio label=\"女\" value=\"0\"></el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"出生日期\">\n          <el-date-picker v-model=\"userInfo.birth\"> </el-date-picker\n        ></el-form-item>\n        <el-form-item label=\"简要介绍\">\n          <el-input type=\"textarea\" v-model=\"userInfo.intro\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"居住地址\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"userInfo.present_address\"\n          ></el-input>\n        </el-form-item>\n\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"addUpdateInfo\">保存</el-button>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n    <el-table\n      :data=\"userList\"\n      style=\"width: 100%\"\n      @selection-change=\"handleSelectionChange\"\n    >\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n      <el-table-column prop=\"name\" label=\"真实名字\"> </el-table-column>\n      <el-table-column prop=\"mobile_phone\" label=\"手机号码\"> </el-table-column>\n      <el-table-column prop=\"email\" label=\"电子邮箱\"> </el-table-column>\n      <el-table-column label=\"操作\">\n        <!-- <el-button @click.stop=\"deleteUser(scope.row.id)\">删除</el-button> -->\n        <template slot-scope=\"scope\">\n          <el-button\n            type=\"primary\"\n            size=\"mini\"\n            icon=\"el-icon-edit\"\n            @click=\"openUpdate(scope.row.id)\"\n            circle\n          ></el-button>\n          <el-popover\n            ref=\"popoverDel\"\n            placement=\"bottom\"\n            width=\"160\"\n            trigger=\"click\"\n          >\n            <div>\n              <div class=\"delTip\">\n                <i class=\"el-icon-warning\" style=\"color: #e6a23c\"></i>提示\n              </div>\n              <p>此操作将永久删除该用户, 是否继续?</p>\n              <div style=\"text-align: center\">\n                <el-button\n                  type=\"primary\"\n                  size=\"mini\"\n                  @click=\"deleteUser(scope.row.id)\"\n                  >确定</el-button\n                >\n              </div>\n            </div>\n            <el-button\n              slot=\"reference\"\n              style=\"margin-left: 10px\"\n              icon=\"el-icon-delete\"\n              type=\"danger\"\n              size=\"mini\"\n              circle\n            ></el-button>\n          </el-popover>\n          <!-- <el-button\n            style=\"margin-left: 10px\"\n            v-popover:popoverDel\n            type=\"danger\"\n            size=\"mini\"\n            icon=\"el-icon-delete\"\n            circle\n          ></el-button> -->\n        </template>\n      </el-table-column>\n    </el-table>\n    <el-button style=\"margin: 10px\" type=\"primary\" @click=\"openCreate\"\n      >创建用户</el-button\n    >\n\n    <el-pagination\n      align=\"center\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"currentPage\"\n      :page-sizes=\"[20, 50, 100]\"\n      :page-size=\"pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\"\n      :total=\"userList.length\"\n    >\n    </el-pagination>\n  </div>\n</template>\n<script>\nimport { deleteUser, getUserList, addUser } from \"@/api/userManage\";\nimport { getInfo, updateInfo } from \"@/api/user\";\nexport default {\n  name: \"problemList\",\n  inject: [\"reload\"],\n  data() {\n    return {\n      userList: [],\n      pageSize: 5,\n      currentPage: 1,\n      dialogVisible: false,\n      userInfo: {},\n      id: Number,\n      registerRules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n        repassword: [\n          { required: true, message: \"请确认密码\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    getData() {\n      getUserList().then((response) => {\n        this.userList = response.data;\n      });\n    },\n    onSubmit() {},\n\n    openUpdate(id) {\n      getInfo(id).then((response) => {\n        this.userInfo = response.data;\n        // sessionStorage.setItem(\"userid\", this.id);\n      });\n      this.dialogVisible = true;\n    },\n    openCreate() {\n      this.dialogVisible = true;\n    },\n    handleClose() {\n      this.dialogVisible = false;\n      this.userInfo = {};\n    },\n    handleSizeChange(val) {\n      this.currentPage = 1;\n      this.pageSize = val;\n    },\n    //当前页改变时触发 跳转其他页\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    handleSelectionChange(selected) {},\n\n    addUpdateInfo() {\n      if (this.userInfo.status) {\n        updateInfo(this.userInfo).then((response) => {\n          console.log(response);\n        });\n      } else {\n        this.userInfo.status = \"True\";\n        addUser(this.userInfo).then((response) => {\n          console.log(response);\n          const { status } = response;\n          if (status == 200)\n            this.$message({\n              message: \"添加成功\",\n              type: \"success\",\n            });\n             this.reload();\n        });\n      }\n      this.handleClose();\n      this.userInfo = {};\n    },\n    deleteUser(id) {\n      console.log(id);\n      deleteUser(id);\n      this.reload();\n    },\n  },\n  mounted() {\n    this.getData();\n  },\n};\n</script>\n<style>\n.el-tag {\n  margin-left: 5px;\n  border-style: none;\n}\n.el-input {\n  width: 6em;\n  margin-right: 1em;\n}\n</style>\n"]}]}