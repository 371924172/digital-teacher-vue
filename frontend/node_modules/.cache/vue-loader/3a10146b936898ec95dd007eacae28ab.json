{"remainingRequest":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\detail.vue","mtime":1623917904000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdmF0YXJDcm9wcGVyIGZyb20gInZ1ZS1hdmF0YXItY3JvcHBlciI7CmltcG9ydCAiYmFiZWwtcG9seWZpbGwiOwppbXBvcnQgbXlVcGxvYWQgZnJvbSAidnVlLWltYWdlLWNyb3AtdXBsb2FkIjsKaW1wb3J0IHsgZ2V0SW5mbywgdXBkYXRlSW5mbyB9IGZyb20gIkAvYXBpL3VzZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlckluZm86IHt9LAogICAgICBpZDogTnVtYmVyLAogICAgICByZWdpc3RlclJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI0iLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICAgIHsgbWVzc2FnZTogIiIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgcGFzc3dvcmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLCB0cmlnZ2VyOiAiYmx1ciIgfSwKICAgICAgICAgIHsgbWVzc2FnZTogIiIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgcmVwYXNzd29yZDogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+ehruiupOWvhueggSIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtZXNzYWdlOiAiIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgdXNlckF2YXRhcjogcmVxdWlyZSgiLi4vLi4vLi4vLi4vYmFja2VuZC9hdmF0YXIvMS5wbmciKSwKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBhdXRob3JpemF0aW9uOiBzdG9yZS5nZXR0ZXJzLnRva2VuLAogICAgICB9LAogICAgICB1cmw6ICIiLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEF2YXRhckNyb3BwZXIsCiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVVcGxvYWRlZChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIC8vIHRoaXMudXNlckF2YXRhciA9CiAgICAgIC8vICAgIkM6Ly9Vc2Vycy8vMzcxOTIvL0Rlc2t0b3AvL2RyYS13YXZlLy9iYWNrZW5kLy9hdmF0YXIvLzEucG5nIjsKICAgIH0sCiAgICBnZXRJbmZvKCkgewogICAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcmlkIikpIHsKICAgICAgICB0aGlzLmlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcmlkIik7CiAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB0aGlzLmlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICBlbHNlIHRoaXMuaWQgPSBzdG9yZS5nZXR0ZXJzLnVzZXJpZDsKICAgICAgZ2V0SW5mbyh0aGlzLmlkKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMudXNlckluZm8gPSByZXNwb25zZS5kYXRhOwogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJpZCIsIHRoaXMuaWQpOwogICAgICAgIHRoaXMudXJsID0gImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC91c2VyUHJvZmlsZS8iICsgdGhpcy5pZCArICIvYXZhdGFyLyI7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUluZm8oKSB7CiAgICAgIHVwZGF0ZUluZm8odGhpcy51c2VySW5mbyk7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCAoKSA9PiB7CiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJpZCIpOwogICAgfSk7CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRJbmZvKCk7CiAgfSwKfTsK"},{"version":3,"sources":["detail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"detail.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div>\n    <el-form\n      ref=\"userForm\"\n      :model=\"userInfo\"\n      label-width=\"80px\"\n      :rules=\"registerRules\"\n    >\n      <el-form-item label=\"头像\">\n        <el-image\n          style=\"width: 100px; height: 100px\"\n          :src=\"userAvatar\"\n          :preview-src-list=\"srcList\"\n        >\n        </el-image>\n\n        <el-button id=\"pick-avatar\" style=\"margin-left: 20px\" size=\"mini\"\n          >上传头像</el-button\n        >\n        <avatar-cropper\n          @uploaded=\"handleUploaded\"\n          @upload-headers=\"headers\"\n          trigger=\"#pick-avatar\"\n          :upload-url=\"url\"\n        />\n      </el-form-item>\n      <el-form-item label=\"用户名\">\n        <el-input v-model=\"userInfo.username\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"手机号\">\n        <el-input v-model=\"userInfo.mobile_phone\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"电子邮件\">\n        <el-input v-model=\"userInfo.email\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"姓名\">\n        <el-input v-model=\"userInfo.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"昵称\">\n        <el-input v-model=\"userInfo.nickname\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"身份证号\">\n        <el-input v-model=\"userInfo.id_card_no\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"性别\">\n        <el-radio-group v-model=\"userInfo.gender\" label=\"性别\">\n          <el-radio label=\"男\" value=\"1\"></el-radio>\n          <el-radio label=\"女\" value=\"0\"></el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"出生日期\">\n        <el-date-picker v-model=\"userInfo.birth\"> </el-date-picker\n      ></el-form-item>\n      <el-form-item label=\"简要介绍\">\n        <el-input type=\"textarea\" v-model=\"userInfo.intro\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"居住地址\">\n        <el-input type=\"textarea\" v-model=\"userInfo.present_address\"></el-input>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"updateInfo()\">保存</el-button>\n        <el-button>取消</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\nimport AvatarCropper from \"vue-avatar-cropper\";\nimport \"babel-polyfill\";\nimport myUpload from \"vue-image-crop-upload\";\nimport { getInfo, updateInfo } from \"@/api/user\";\nimport store from \"@/store\";\nexport default {\n  data() {\n    return {\n      userInfo: {},\n      id: Number,\n      registerRules: {\n        username: [\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n        repassword: [\n          { required: true, message: \"请确认密码\", trigger: \"blur\" },\n          { message: \"\", trigger: \"blur\" },\n        ],\n      },\n      userAvatar: require(\"../../../../backend/avatar/1.png\"),\n      show: false,\n      headers: {\n        authorization: store.getters.token,\n      },\n      url: \"\",\n    };\n  },\n  components: {\n    AvatarCropper,\n  },\n  methods: {\n    handleUploaded(response) {\n      console.log(response);\n      // this.userAvatar =\n      //   \"C://Users//37192//Desktop//dra-wave//backend//avatar//1.png\";\n    },\n    getInfo() {\n      if (sessionStorage.getItem(\"userid\")) {\n        this.id = sessionStorage.getItem(\"userid\");\n      } else if (this.$route.params.id) this.id = this.$route.params.id;\n      else this.id = store.getters.userid;\n      getInfo(this.id).then((response) => {\n        this.userInfo = response.data;\n        sessionStorage.setItem(\"userid\", this.id);\n        this.url = \"http://127.0.0.1:8000/userProfile/\" + this.id + \"/avatar/\";\n      });\n    },\n    updateInfo() {\n      updateInfo(this.userInfo);\n    },\n  },\n  created() {\n    window.addEventListener(\"beforeunload\", () => {\n      sessionStorage.removeItem(\"userid\");\n    });\n  },\n  mounted() {\n    this.getInfo();\n  },\n};\n</script>"]}]}