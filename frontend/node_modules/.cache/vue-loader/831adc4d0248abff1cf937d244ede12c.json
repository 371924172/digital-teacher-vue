{"remainingRequest":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\changePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\changePassword.vue","mtime":1623917904000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoYW5nZVBhc3N3b3JkLCBsb2dvdXQgfSBmcm9tICJAL2FwaS91c2VyIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICB2YXIgdmFsaWRhdGVQYXNzID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXmlrDlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBjYWxsYmFjaygpOwogICAgfTsKICAgIHZhciB2YWxpZGF0ZVBhc3MyID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7flho3mrKHovpPlhaXlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMuY2hhbmdlUGFzc3dvcmRGb3JtLm5ld3Bhc3N3b3JkKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VQYXNzd29yZEZvcm06IHsKICAgICAgICBvbGRwYXNzd29yZDogIiIsCiAgICAgICAgbmV3cGFzc3dvcmQ6ICIiLAogICAgICAgIHJlcGFzc3dvcmQ6ICIiLAogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIG9sZHBhc3N3b3JkOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pen5a+G56CBIiwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgICBuZXdwYXNzd29yZDogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICByZXBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNoYW5nZVBhc3N3b3JkKHRoaXMuY2hhbmdlUGFzc3dvcmRGb3JtKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICBjb25zdCB7IHN0YXR1cyB9ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgaWYgKHN0YXR1cykgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgbWVzc2FnZTogIuaIkOWKn+S/ruaUueWvhueggSzor7fph43mlrDnmbvlvZUiLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VyL2xvZ291dCIpOwogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICAgICAgfSBlbHNlIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaXp+WvhueggemUmeivryIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["changePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"changePassword.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <el-form\n    ref=\"changePasswordForm\"\n    :model=\"changePasswordForm\"\n    :rules=\"rules\"\n    label-width=\"80px\"\n    hide-required-asterisk=\"True\"\n  >\n    <el-form-item label=\"旧密码\" prop=\"oldpassword\">\n      <el-input v-model=\"changePasswordForm.oldpassword\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"新密码\" prop=\"newpassword\">\n      <el-input v-model=\"changePasswordForm.newpassword\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"repassword\">\n      <el-input v-model=\"changePasswordForm.repassword\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"onSubmit('changePasswordForm')\"\n        >立即创建</el-button\n      >\n    </el-form-item>\n  </el-form>\n</template>\n<script>\nimport { changePassword, logout } from \"@/api/user\";\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入新密码\"));\n      } else callback();\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.changePasswordForm.newpassword) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      changePasswordForm: {\n        oldpassword: \"\",\n        newpassword: \"\",\n        repassword: \"\",\n      },\n      rules: {\n        oldpassword: [\n          { required: true, message: \"请输入旧密码\", trigger: \"blur\" },\n        ],\n        newpassword: [{ validator: validatePass, trigger: \"blur\" }],\n        repassword: [{ validator: validatePass2, trigger: \"blur\" }],\n      },\n    };\n  },\n  methods: {\n    onSubmit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          changePassword(this.changePasswordForm).then((response) => {\n            const { status } = response.data;\n            if (status) {\n              this.$message({\n                message: \"成功修改密码,请重新登录\",\n                type: \"success\",\n              });\n              this.$store.dispatch(\"user/logout\");\n              this.$router.push(\"/login\");\n            } else this.$message.error(\"旧密码错误\");\n          });\n        } else {\n          console.log(\"error\");\n        }\n      });\n    },\n  },\n};\n</script>"]}]}