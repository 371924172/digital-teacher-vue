{"remainingRequest":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\views\\user\\register.vue","mtime":1623917904000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGV4aXN0LCByZWdpc3RlciB9IGZyb20gIkAvYXBpL3VzZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHZhciB2YWxpZGF0ZVVzZXJuYW1lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgPT09ICIiKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7fovpPlhaXnlKjmiLflkI0iKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZXhpc3QodGhpcy51c2VyRm9ybSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIHRoaXMuZXhpc3QgPSByZXNwb25zZS5kYXRhLmNvdW50OwogICAgICAgIH0pOwogICAgICAgIGlmICh0aGlzLmV4aXN0KSB7CiAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIueUqOaIt+WQjemHjeWkjSIpKTsKICAgICAgICB9IGVsc2UgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHZhciB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIGNhbGxiYWNrKCk7CiAgICB9OwogICAgdmFyIHZhbGlkYXRlUGFzczIgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh2YWx1ZSA9PT0gIiIpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+WGjeasoei+k+WFpeWvhueggSIpKTsKICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy51c2VyRm9ybS5wYXNzd29yZCkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi5Lik5qyh6L6T5YWl5a+G56CB5LiN5LiA6Ie0ISIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgdXNlckZvcm06IHsKICAgICAgICBpc19zdGFmZjogMSwKICAgICAgfSwKICAgICAgcmVnaXN0ZXJSdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlVXNlcm5hbWUsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICBwYXNzd29yZDogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgICByZXBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzczIsIHRyaWdnZXI6ICJibHVyIiB9XSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHJlZ2lzdGVyKHRoaXMudXNlckZvcm0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3Igc3VibWl0ISEiKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <el-container>\n    <el-header height=\"200px\"></el-header>\n    <el-container>\n      <el-aside width=\"60%\"></el-aside>\n      <el-container>\n        <el-main height=\"100px\"\n          ><el-form\n            ref=\"userForm\"\n            :model=\"userForm\"\n            label-width=\"80px\"\n            :rules=\"registerRules\"\n            ><span> 用户注册</span>\n            <el-form-item prop=\"username\">\n              <template slot=\"label\">\n                <i class=\"el-icon-user\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.username\"\n                placeholder=\"用户名\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"密码\" prop=\"password\">\n              <template slot=\"label\">\n                <i class=\"el-icon-lock\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.password\"\n                placeholder=\"密码\"\n                type=\"password\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"确认密码\" prop=\"repassword\">\n              <template slot=\"label\">\n                <i class=\"el-icon-key\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.repassword\"\n                placeholder=\"确认密码\"\n                type=\"password\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"手机号\">\n              <template slot=\"label\">\n                <i class=\"el-icon-mobile-phone\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.mobile_phone\"\n                placeholder=\"手机号\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"电子邮件\">\n              <template slot=\"label\">\n                <i class=\"el-icon-message\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.email\"\n                placeholder=\"电子邮箱\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"姓名\">\n              <template slot=\"label\">\n                <i class=\"el-icon-tickets\"></i>\n              </template>\n              <el-input v-model=\"userForm.name\" placeholder=\"姓名\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"昵称\">\n              <template slot=\"label\">\n                <i class=\"el-icon-s-custom\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.nickname\"\n                placeholder=\"昵称\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"身份证号\">\n              <template slot=\"label\">\n                <i class=\"el-icon-postcard\"></i>\n              </template>\n              <el-input\n                v-model=\"userForm.id_card_no\"\n                placeholder=\"身份证号\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"性别\">\n              <template slot=\"label\">\n                <i class=\"el-icon-guide\"></i>\n              </template>\n              <el-radio-group v-model=\"userForm.gender\" label=\"性别\">\n                <el-radio label=\"男\" value=\"1\"></el-radio>\n                <el-radio label=\"女\" value=\"0\"></el-radio>\n              </el-radio-group>\n            </el-form-item>\n            <el-form-item label=\"出生日期\">\n              <template slot=\"label\">\n                <i class=\"el-icon-date\"></i>\n              </template>\n              <el-date-picker v-model=\"userForm.birth\" placeholder=\"出生日期\">\n              </el-date-picker\n            ></el-form-item>\n            <el-form-item label=\"简要介绍\">\n              <template slot=\"label\">\n                <i class=\"el-icon-collection\"></i>\n              </template>\n              <el-input\n                type=\"textarea\"\n                v-model=\"userForm.intro\"\n                placeholder=\"简要介绍\"\n              ></el-input>\n            </el-form-item>\n            <el-form-item label=\"居住地址\">\n              <template slot=\"label\">\n                <i class=\"el-icon-map-location\"></i>\n              </template>\n              <el-input\n                type=\"textarea\"\n                v-model=\"userForm.present_address\"\n                placeholder=\"居住地址\"\n              ></el-input>\n            </el-form-item>\n\n            <el-form-item>\n              <el-button type=\"primary\" @click=\"onSubmit('userForm')\"\n                >注册</el-button\n              >\n            </el-form-item>\n          </el-form></el-main\n        >\n        <el-footer></el-footer>\n      </el-container>\n    </el-container>\n  </el-container>\n</template>\n<script>\nimport { exist, register } from \"@/api/user\";\nexport default {\n  data() {\n    var validateUsername = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入用户名\"));\n      } else {\n        exist(this.userForm).then((response) => {\n          this.exist = response.data.count;\n        });\n        if (this.exist) {\n          callback(new Error(\"用户名重复\"));\n        } else callback();\n      }\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请输入密码\"));\n      } else callback();\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.userForm.password) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      userForm: {\n        is_staff: 1,\n      },\n      registerRules: {\n        username: [{ validator: validateUsername, trigger: \"blur\" }],\n        password: [{ validator: validatePass, trigger: \"blur\" }],\n        repassword: [{ validator: validatePass2, trigger: \"blur\" }],\n      },\n    };\n  },\n  methods: {\n    onSubmit(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          register(this.userForm).then((response) => {\n            console.log(response);\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n  },\n};\n</script>\n<style>\n.el-input {\n  width: 300px;\n}\n</style>"]}]}