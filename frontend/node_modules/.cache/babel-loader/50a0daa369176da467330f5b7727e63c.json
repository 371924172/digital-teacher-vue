{"remainingRequest":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\src\\utils\\request.js","mtime":1623632790000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YifanWang\\Desktop\\dra-wave\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOyAvLyBjcmVhdGUgYW4gYXhpb3MgaW5zdGFuY2UKCnZhciBzZXJ2aWNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJLAogIC8vIHVybCA9IGJhc2UgdXJsICsgcmVxdWVzdCB1cmwKICAvLyB3aXRoQ3JlZGVudGlhbHM6IHRydWUsIC8vIHNlbmQgY29va2llcyB3aGVuIGNyb3NzLWRvbWFpbiByZXF1ZXN0cwogIHRpbWVvdXQ6IDUwMDAgLy8gcmVxdWVzdCB0aW1lb3V0Cgp9KTsgLy8gcmVxdWVzdCBpbnRlcmNlcHRvcgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIGRvIHNvbWV0aGluZyBiZWZvcmUgcmVxdWVzdCBpcyBzZW50CiAgaWYgKHN0b3JlLmdldHRlcnMudG9rZW4pIHsKICAgIC8vIGxldCBlYWNoIHJlcXVlc3QgY2FycnkgdG9rZW4KICAgIC8vIFsnWC1Ub2tlbiddIGlzIGEgY3VzdG9tIGhlYWRlcnMga2V5CiAgICAvLyBwbGVhc2UgbW9kaWZ5IGl0IGFjY29yZGluZyB0byB0aGUgYWN0dWFsIHNpdHVhdGlvbgogICAgY29uZmlnLmhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSA9ICdKV1QgJyArIGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyBkbyBzb21ldGhpbmcgd2l0aCByZXF1ZXN0IGVycm9yCiAgY29uc29sZS5sb2coZXJyb3IpOyAvLyBmb3IgZGVidWcKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIHJlc3BvbnNlIGludGVyY2VwdG9yCi8vIHNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZSgKLy8gICAvKioKLy8gICAgKiBJZiB5b3Ugd2FudCB0byBnZXQgaHR0cCBpbmZvcm1hdGlvbiBzdWNoIGFzIGhlYWRlcnMgb3Igc3RhdHVzCi8vICAgICogUGxlYXNlIHJldHVybiAgcmVzcG9uc2UgPT4gcmVzcG9uc2UKLy8gICAqLwovLyAgIC8qKgovLyAgICAqIERldGVybWluZSB0aGUgcmVxdWVzdCBzdGF0dXMgYnkgY3VzdG9tIGNvZGUKLy8gICAgKiBIZXJlIGlzIGp1c3QgYW4gZXhhbXBsZQovLyAgICAqIFlvdSBjYW4gYWxzbyBqdWRnZSB0aGUgc3RhdHVzIGJ5IEhUVFAgU3RhdHVzIENvZGUKLy8gICAgKi8KLy8gICByZXNwb25zZSA9PiB7Ci8vICAgICBjb25zdCByZXMgPSByZXNwb25zZS5kYXRhCi8vICAgICAvLyBpZiB0aGUgY3VzdG9tIGNvZGUgaXMgbm90IDIwMDAwLCBpdCBpcyBqdWRnZWQgYXMgYW4gZXJyb3IuCi8vICAgICBpZiAocmVzLmNvZGUgIT09IDIwMDAwKSB7Ci8vICAgICAgIE1lc3NhZ2UoewovLyAgICAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlIHx8ICdFcnJvcicsCi8vICAgICAgICAgdHlwZTogJ2Vycm9yJywKLy8gICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKLy8gICAgICAgfSkKLy8gICAgICAgLy8gNTAwMDg6IElsbGVnYWwgdG9rZW47IDUwMDEyOiBPdGhlciBjbGllbnRzIGxvZ2dlZCBpbjsgNTAwMTQ6IFRva2VuIGV4cGlyZWQ7Ci8vICAgICAgIGlmIChyZXMuY29kZSA9PT0gNTAwMDggfHwgcmVzLmNvZGUgPT09IDUwMDEyIHx8IHJlcy5jb2RlID09PSA1MDAxNCkgewovLyAgICAgICAgIC8vIHRvIHJlLWxvZ2luCi8vICAgICAgICAgTWVzc2FnZUJveC5jb25maXJtKCdZb3UgaGF2ZSBiZWVuIGxvZ2dlZCBvdXQsIHlvdSBjYW4gY2FuY2VsIHRvIHN0YXkgb24gdGhpcyBwYWdlLCBvciBsb2cgaW4gYWdhaW4nLCAnQ29uZmlybSBsb2dvdXQnLCB7Ci8vICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ1JlLUxvZ2luJywKLy8gICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdDYW5jZWwnLAovLyAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCi8vICAgICAgICAgfSkudGhlbigoKSA9PiB7Ci8vICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgndXNlci9yZXNldFRva2VuJykudGhlbigoKSA9PiB7Ci8vICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpCi8vICAgICAgICAgICB9KQovLyAgICAgICAgIH0pCi8vICAgICAgIH0KLy8gICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihyZXMubWVzc2FnZSB8fCAnRXJyb3InKSkKLy8gICAgIH0gZWxzZSB7Ci8vICAgICAgIHJldHVybiByZXMKLy8gICAgIH0KLy8gICB9LAovLyAgIGVycm9yID0+IHsKLy8gICAgIGNvbnNvbGUubG9nKCdlcnInICsgZXJyb3IpIC8vIGZvciBkZWJ1ZwovLyAgICAgTWVzc2FnZSh7Ci8vICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCi8vICAgICAgIHR5cGU6ICdlcnJvcicsCi8vICAgICAgIGR1cmF0aW9uOiA1ICogMTAwMAovLyAgICAgfSkKLy8gICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcikKLy8gICB9Ci8vICkKCmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"sources":["C:/Users/YifanWang/Desktop/dra-wave/frontend/src/utils/request.js"],"names":["axios","store","getToken","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","getters","token","headers","error","console","log","Promise","reject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB,C,CAEA;;AACA,IAAMC,OAAO,GAAGH,KAAK,CAACI,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvC;AACAC,EAAAA,OAAO,EAAE,IAHkB,CAGb;;AAHa,CAAb,CAAhB,C,CAMA;;AACAN,OAAO,CAACO,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AAEA,MAAIZ,KAAK,CAACa,OAAN,CAAcC,KAAlB,EAAyB;AACvB;AACA;AACA;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,IAAkC,SAASd,QAAQ,EAAnD;AACD;;AACD,SAAOW,MAAP;AACD,CAXH,EAYE,UAAAI,KAAK,EAAI;AACP;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ,EAFO,CAEY;;AACnB,SAAOG,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACD,CAhBH,E,CAmBA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAed,OAAf","sourcesContent":["import axios from 'axios'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\n\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_BASE_API, // url = base url + request url\n  // withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n\n    if (store.getters.token) {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers['authorization'] = 'JWT ' + getToken()\n    }\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\n// service.interceptors.response.use(\n//   /**\n//    * If you want to get http information such as headers or status\n//    * Please return  response => response\n//   */\n\n//   /**\n//    * Determine the request status by custom code\n//    * Here is just an example\n//    * You can also judge the status by HTTP Status Code\n//    */\n//   response => {\n//     const res = response.data\n//     // if the custom code is not 20000, it is judged as an error.\n//     if (res.code !== 20000) {\n//       Message({\n//         message: res.message || 'Error',\n//         type: 'error',\n//         duration: 5 * 1000\n//       })\n\n//       // 50008: Illegal token; 50012: Other clients logged in; 50014: Token expired;\n//       if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n//         // to re-login\n//         MessageBox.confirm('You have been logged out, you can cancel to stay on this page, or log in again', 'Confirm logout', {\n//           confirmButtonText: 'Re-Login',\n//           cancelButtonText: 'Cancel',\n//           type: 'warning'\n//         }).then(() => {\n//           store.dispatch('user/resetToken').then(() => {\n//             location.reload()\n//           })\n//         })\n//       }\n//       return Promise.reject(new Error(res.message || 'Error'))\n//     } else {\n//       return res\n//     }\n//   },\n//   error => {\n//     console.log('err' + error) // for debug\n//     Message({\n//       message: error.message,\n//       type: 'error',\n//       duration: 5 * 1000\n//     })\n//     return Promise.reject(error)\n//   }\n// )\n\nexport default service\n"]}]}